{"ast":null,"code":"import \"bootstrap/dist/css/bootstrap.min.css\";\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\ncreateApp(App).use(router).mount(\"#app\");\nimport \"bootstrap/dist/js/bootstrap.js\";\nlet MDB = {};\nlet openRequest = indexedDB.open('MDB', 1);\n\n// Удалить базу данных:\n// let deleteRequest = indexedDB.deleteDatabase(name)\n// // deleteRequest.onsuccess/onerror отслеживает результат\n\nopenRequest.onupgradeneeded = function (event) {\n  // версия существующей базы данных меньше 2 (или база данных не существует)\n  MDB = openRequest.result;\n  console.log('event', event);\n  // switch(event.oldVersion) { // существующая (старая) версия базы данных\n  //     case 0:\n  //         // версия 0 означает, что на клиенте нет базы данных\n  //         // выполнить инициализацию\n  //     case 1:\n  //         // на клиенте версия базы данных 1\n  //         // обновить\n  // }\n};\nopenRequest.onerror = function () {\n  console.error(\"Error\", openRequest.error);\n};\nopenRequest.onsuccess = function () {\n  let db = openRequest.result;\n  db.onversionchange = function () {\n    db.close();\n    alert(\"База данных устарела, пожалуйста, перезагрузите страницу.\");\n  };\n\n  // продолжить работу с базой данных, используя объект db\n  MDB = db;\n  console.log('MDB', MDB);\n};","map":{"version":3,"names":["createApp","App","router","use","mount","MDB","openRequest","indexedDB","open","onupgradeneeded","event","result","console","log","onerror","error","onsuccess","db","onversionchange","close","alert"],"sources":["/home/kup/my_projects/vue/kgm/src/main.js"],"sourcesContent":["import \"bootstrap/dist/css/bootstrap.min.css\";\nimport { createApp } from \"vue\";\nimport App from \"./App.vue\";\nimport router from \"./router\";\n\ncreateApp(App).use(router).mount(\"#app\");\n\nimport \"bootstrap/dist/js/bootstrap.js\";\n\nlet MDB = {};\nlet openRequest = indexedDB.open('MDB', 1);\n\n// Удалить базу данных:\n// let deleteRequest = indexedDB.deleteDatabase(name)\n// // deleteRequest.onsuccess/onerror отслеживает результат\n\nopenRequest.onupgradeneeded = function(event) {\n    // версия существующей базы данных меньше 2 (или база данных не существует)\n    MDB = openRequest.result;\n    console.log('event', event);\n    // switch(event.oldVersion) { // существующая (старая) версия базы данных\n    //     case 0:\n    //         // версия 0 означает, что на клиенте нет базы данных\n    //         // выполнить инициализацию\n    //     case 1:\n    //         // на клиенте версия базы данных 1\n    //         // обновить\n    // }\n};\n\nopenRequest.onerror = function() {\n    console.error(\"Error\", openRequest.error);\n};\n  \nopenRequest.onsuccess = function() {\n    let db = openRequest.result;\n    \n    db.onversionchange = function() {\n        db.close();\n        alert(\"База данных устарела, пожалуйста, перезагрузите страницу.\")\n    };\n    \n    // продолжить работу с базой данных, используя объект db\n    MDB = db;\n    console.log('MDB', MDB);\n};"],"mappings":"AAAA,OAAO,sCAAsC;AAC7C,SAASA,SAAS,QAAQ,KAAK;AAC/B,OAAOC,GAAG,MAAM,WAAW;AAC3B,OAAOC,MAAM,MAAM,UAAU;AAE7BF,SAAS,CAACC,GAAG,CAAC,CAACE,GAAG,CAACD,MAAM,CAAC,CAACE,KAAK,CAAC,MAAM,CAAC;AAExC,OAAO,gCAAgC;AAEvC,IAAIC,GAAG,GAAG,CAAC,CAAC;AACZ,IAAIC,WAAW,GAAGC,SAAS,CAACC,IAAI,CAAC,KAAK,EAAE,CAAC,CAAC;;AAE1C;AACA;AACA;;AAEAF,WAAW,CAACG,eAAe,GAAG,UAASC,KAAK,EAAE;EAC1C;EACAL,GAAG,GAAGC,WAAW,CAACK,MAAM;EACxBC,OAAO,CAACC,GAAG,CAAC,OAAO,EAAEH,KAAK,CAAC;EAC3B;EACA;EACA;EACA;EACA;EACA;EACA;EACA;AACJ,CAAC;AAEDJ,WAAW,CAACQ,OAAO,GAAG,YAAW;EAC7BF,OAAO,CAACG,KAAK,CAAC,OAAO,EAAET,WAAW,CAACS,KAAK,CAAC;AAC7C,CAAC;AAEDT,WAAW,CAACU,SAAS,GAAG,YAAW;EAC/B,IAAIC,EAAE,GAAGX,WAAW,CAACK,MAAM;EAE3BM,EAAE,CAACC,eAAe,GAAG,YAAW;IAC5BD,EAAE,CAACE,KAAK,CAAC,CAAC;IACVC,KAAK,CAAC,2DAA2D,CAAC;EACtE,CAAC;;EAED;EACAf,GAAG,GAAGY,EAAE;EACRL,OAAO,CAACC,GAAG,CAAC,KAAK,EAAER,GAAG,CAAC;AAC3B,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}